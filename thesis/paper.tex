

\documentclass{sig-alternate}
\usepackage{blindtext}
\usepackage[english]{babel}

%Used to create Macro 1
\usepackage{array}

%
\usepackage{multirow}

%Used for \textsubscript
\usepackage{fixltx2e}



\begin{document}

%Macro 1, used to create thick vertical line in Table 1: Category 
\newcolumntype{"}{@{\hskip\tabcolsep\vrule width 1pt\hskip\tabcolsep}}
\makeatother

\conferenceinfo{14th IWPSE} {'15 Bergamo, Italy}
\CopyrightYear{2015}

\crdata{1-23456-78-9/01/23}


\title{Exploring the Motives and Driving Forces Behind Modifications to APIs From a Software Evolution Perspective}


\numberofauthors{4} 

\author{
% 1st. author
\alignauthor
John Burchell\\
       \affaddr{Computer Science and Engineering}\\
       \affaddr{University of Gothenburg}\\
       \email{john.a.burchell@gmail.com}
% 2nd. author
\alignauthor
William Granli\\
       \affaddr{Computer Science and Engineering}\\
       \affaddr{University of Gothenburg}\\
       \email{william.granli@gmail.com}
\and
% 3rd. author
\alignauthor Imed Hammouda\titlenote{Co-author}\\
       \affaddr{Computer Science and Engineering}\\
       \affaddr{University of Gothenburg}\\
       \email{imed.hammouda@gu.se}
% 4th 
\alignauthor Eric Knauss\titlenote{Co-author}\\
       \affaddr{Computer Science and Engineering}\\
       \affaddr{University of Gothenburg}\\
       \email{imed.hammouda@gu.se}
}

\maketitle

\begin{abstract}


\textbf{Background  } 
Studies of the motives and drivers behind modifications to APIs have been done before, but platform APIs are, so far, unexplored. Previous work has also not studied APIs from the perspective of widely recognised software evolution theories, such as the Types of Software Evolution and Software Maintenance and Lehman's laws of software evolution. 

\smallskip \noindent
\textbf{Objective  } 
This study explored how companies actively drive changes to APIs and how APIs evolve from a passive point of view. The aim was also to test how well we could reverse engineer these change decisions. The goal was to study these factors by relating them to existing software evolution theories. 


\smallskip \noindent
\textbf{Method  }
This case study was conducted by investigating the changes between two versions in a platform API and its documentation, and by interviewing the architects of the API. The changes were analysed from a qualitative and investigative point of view. 

\smallskip \noindent
\textbf{Results  }
This study identified 13 majors changes to the API. The study concluded that the most major driving force for the evolution of APIs is the drive for new functionality and that change decisions to a large extent can be reverse engineered. It was also found that 7 out of 8 of Lehman's laws were applicable to APIs. 


\smallskip \noindent
\textbf{Conclusion  }
This study has provided valuable insight into the evolution of platform APIs. The qualitative analysis can help other companies to improve their API maintenance process. The successful attempt to reverse engineer the change decisions should encourage similar studies to be conducted. The investigation of Lehman's laws show that APIs cannot be generalised and be compared to any type of system. 



\end{abstract}

\category{D.2.7}{Software Engineering}{Distribution, Maintenance, Enhancement}[Restructuring, reverse engineering, and re-engineering]
\category{K.6.3}{Computing Milieux}{Software Management}[Software Maintenance]

\terms{Theory, Design or Verification/Documentation maybe?}

\keywords{API Design, Software Evolution, Software Maintenance}



\section{Introduction} \label{introduction}
%API Design (and a little bit of ecosystems and a bit of problem statement)
As the software industry and the open-source movement steadily grow, the number of public APIs is increasing. APIs can improve the development speed \cite{stylos2006comparing}, contribute to higher quality software \cite{stylos2006comparing} and increase the reusability of software \cite{afonso2012evaluating}. There is a consensus in that modifications to APIs could negatively impact the users of the API \cite{google_talk} \cite{mcdonnell2013empirical} \cite{robbes2012developers} \cite{henning2007api}. The main reason for this is that it requires the API users to update the application code, thus causing a disruption in the application's software ecosystem \cite{messerschmitt2005software}. The most common changes to APIs occur from refactoring \cite{dig2005role} \cite{xing2006refactoring}. 
%Software Evolution 
In the discipline of software evolution, such updates to software are studied from an evolutionary standpoint. Software can be updated for different reasons and these motives can be grouped into corrective, adaptive, perfective and preventive changes \cite{lientz1980software}. 

%Gap in Literature
Studies that explore the intent behind API modifications exist \cite{hou2011exploring}. There are, however, no studies that attempt to map the motives behind changes to existing software evolution theories, such as the four categories of maintenance \cite{lientz1980software}. The area of programming language APIs is well-explored \cite{hou2011exploring} \cite{shi2011empirical}, but few studies that explore platform APIs exist \cite{robbes2012developers}. To the best of our knowledge, no studies that explore the motives behind or the effects of API evolution have previously been performed on embedded platform APIs. Reverse engineering design decisions is a challenging yet interesting problem. The better we can understand why changes occur and what problems they are trying to solve, the better we can design around these problems to avoid them cropping up in the future.


%Purpose (and a bit of problem statement)
%%****NEW*****
Making changes to existing APIs can have a negative impact upon the users of those APIs. It is therefore important to understand why these changes occur. Understanding the motives behind the changes could help API designers prevent or avoid potential changes to their APIs. In order to achieve this and to provide immediate benefit to industry, an exploratory case study will be undertaken to investigate the underlying motives behind API changes of an existing API. Empirical analysis of changes between two major versions of an API will be undertaken, following which an interview with the architects will be used to verify the findings of our study. 
%%****^NEW^****

%Old
Due to the negative implications that modifications to APIs cause for its users, it is important to understand why changes to them occur. If most common pitfalls are known before the development of new APIs begin, these mistakes can be mitigated. Before the industry can make use of this information, we must also critically assess to what degree we can trace such motives. To achieve this, we will perform a case study which aims to investigate the underlying factors behind API changes. This will be achieved by empirically analysing the changes between two versions of an API. Subsequently, the designers of the API will be interviewed and asked to verify the accuracy of our findings. 
%Old

\subsection{Research Questions} \label{rqs}
\begin{description}
\item[\textbf{RQ1}] How do companies actively drive API evolution?
\item[\textbf{RQ1.1}] To what extent can we reverse engineer API change decisions?
\item[\textbf{RQ2}] How do APIs ``passively'' evolve?


\end{description}

%Structure of the paper
The sections following the Introduction are structured as follows: In Section \ref{existing_literature}, we present the background and previously published work that is related to our study. Section \ref{case_company_description} describes the case company and how it was selected. A description of our methodology is introduced in Section \ref{methodology}. In Section \ref{results}, the results of our study are presented and in Section \ref{conclusion}, we discuss the findings of our study.

\section{Existing Literature} \label{existing_literature}
This section will introduce the topics of API design and software evolution and provide a brief review of studies that are directly related to our study. 


\subsection{API Design} \label{api_design}
API design is notoriously difficult, as a myriad of design and performance decisions must be taken into consideration when creating APIs \cite{afonso2012evaluating} \cite{bloch2008effective} \cite{stylos2006comparing}. Examples of such decisions are whether to use the factory pattern or constructors to create objects, or if the API should display errors during compilation or runtime \cite{stylos2006comparing}. More trivial design problems, such as, assigning names to API features and difficulty in naming types also have a large impact on the usability of the API \cite{shi2011empirical}. When facing such design decisions, the following four factors are important to consider: a) The API  must be understandable through good documentation, b) the API must not be overly abstract, c) the API must be reusable and d) the API must be easy to learn \cite{shi2011empirical}. One of the most important qualities in an API is that the intent of the API is clear to the user when, for example, using design patterns, such as the concrete factory pattern \cite{stylos2006comparing} \cite{shi2011empirical}. The sum of all design decisions taken during the development of an API will decide the usability of the API. Measuring such a factor can be done by measuring the twelve cognitive dimensions which are factors that are impacted by the interaction between the API and the user of it \cite{clarke2004measuring}. 


\subsection{Software Evolution} \label{software_evolution}
%%Categories of maintenance and types of maintenance
Software evolution is a field which studies the application of software maintenance activities and processes on software and the resulting, evolved versions of the software. The concept of software maintenance has existed since the 1960s. Well-known studies from this era established the importance of software maintenance \cite{lientz1980software}. One study would go on to have a particularly profound effect on software maintenance by establishing a set of four categories which describe the intents behind change to software \cite{lientz1980software}. These categories were refined in a further study, in which the number of categories were increased from four to twelve \cite{chapin2001types}. The categories proposed were: Enhancive, corrective, reductive, adaptive, performance, preventive, groomative, updative, reformative, evaluative, consultive and training \cite{chapin2001types}. Each category describes a type of software maintenance activity which relate to one of three particular areas; the code, the software and the customer-experienced functionality \cite{chapin2001types}. This study also helped to further the distinction between software maintenance and software evolution. The study suggested that software maintenance is a part of software evolution and that the two are not interchangeable \cite{chapin2001types}. 

%%Lehman's laws (!!!improve later)
An early study made in the area of software evolution suggests that changes to software must obey one of eight laws of software evolution \cite{lehman1980programs}. The laws presented in the study are 1) Continuing Change, 2) Increasing Complexity, 3) Self Regulation, 4) Conservation of Organisational Stability, 5) Conservation of Familiarities, 6) Continuing Growth, 7) Declining Quality and 8) Feedback System \cite{lehman1980programs}. The study also outlines that these laws only apply to E-programs, which are programs that are ``change prone" and that ``mechanise a human or societal activity" \cite{lehman1980programs}.

\subsection{Related Work} \label{related_work}
Previous studies that have attempted analyse APIs in the context of software evolution have primarily focused on APIs that are a part of large programming languages, such as Java \cite{hou2011exploring} \cite{shi2011empirical} and Smalltalk \cite{robbes2012developers}. One study \cite{hou2011exploring} attempted to uncover the intents behind the changes made in the AWT and Swing Java libraries. They found that the use of a strong architecture was vital in ensuring a successful evolution of the API \cite{hou2011exploring}. In their study, the intents were categorised around programming related factors such as reducing coupling or conformance to naming conventions.

One study \cite{dig2005role} investigated three frameworks and one library in which the study found that 80\% of refactoring changes to APIs negatively affected existing applications. Refactorings are not the only changes to APIs that can impact existing projects negatively. Another study was conducted regarding the changes, which the researchers refer to as ripple effects \cite{robbes2012developers}. They found that changes in APIs have an effect upon the entire ecosystem. This particular empirical study found that 14\% of non-trivial API deprecations caused errors in at least one project, with the worst case of 79 projects being affected \cite{robbes2012developers}.


\section{Case Company Description} \label{case_company_description}
The case company is a medium-sized company in the domain of security cameras. The company has its headquarters in Lund, Sweden, but it operates worldwide. The company is the global market leader in the markets of network cameras and video encoders. The company develops embedded software for the security cameras and some of their products are designed to be accessible through APIs that are also developed by the company. 

%Try to get information about the users of the API. Either through Imed, or through the interviews. 

The case was selected using convenience sampling \cite{flyvbjerg2006five} and a maximum variation strategy was used \cite{benbasat1987case}. As such, the goal was to include as many companies as possible in this study.

%Try to motivate why other sampling methods weren't used.

%Info from the interview, add to this section
Has been released, in the form we looked at (supports that we’re doing a ``real'' case study)
They have partners which develop applications using their API. These applications are then used by the end-users of the camera. 

%%
Hardware
The API platform is developed for many different types of cameras. 
Some have audio, some don’t, for example.

%%Does this paragraph below belong here or somewhere else? Feels a bit odd!    W: Case Company Description I think
The API itself consisted of two major versions; 1.4 and 2.0. There were no intermediate versions between 1.4 and 2.0. Version 1.4 was actually the same version as 1.0, just with added build options for other hardware platforms. The changes therefore come from the changes between the two major versions. Given that there was an apparent ``big bang'' implementation of the new API, we have tried to determine what existed in the previous version, what was re-implemented and what is brand new.



\section{Methodology} \label{methodology}
%Intro and summary
This study has been conducted using the case study meth-odology \cite{runeson2009guidelines}. The goal of the study was twofold. Firstly, the aim was to empirically \textit{explore} the motives behind changes to APIs and secondly, our ambition was to \textit{validate} the results' level of correctness by comparing our findings with the case company's explanation of their motives. Our research can be classified as an embedded case study \cite{yin2013case}, since both the API code and API documentation have been used as units of analysis. 

%Reasons for choosing case study
The reason the selected methodology was used is that it is essential to study the phenomenon of API change in its natural context. The applicability of case studies in such scenarios is supported by existing literature \cite{benbasat1987case} \cite{runeson2009guidelines} \cite{yin2013case} \cite{robson2002real}. An alternative approach that was considered was design research, but if a prototype API was to be used instead of one which is tried and tested in an industry setting, the study would lack real-life context \cite{runeson2009guidelines}. An additional motivation for why the case study approach was used is that there is little existing research conducted in the area of motives behind API change and that input from the industry is vital to the success of the research; especially to be able to answer \textbf{RQ2}. 

%Consider adding subsub for code+doc and interviews later
\subsection{Data Collection} \label{data_collection}
%Intro to code inspection
The data were collected primarily through inspections of the source code and the archival analysis of accompanying  documentation. The source code was comprised of two versions of an API which the company had developed. An older version (1.4) which is currently released and a newer version which has recently been deployed (2.0). Each version of the API had its own respective documentation. The documentation was inspected and organised to find explanations of the features offered by the API. 

%Description of inspection
From the APIs we collected method names, parameters and return types. (!!!Add more here. Maybe put it in a table?) The data were collected from both versions of the APIs, with the changes between the two versions being of particular interest. <-- do we still want to mention exactly what kinds of data we looked for? i.e. return types, enums, typedefs etc etc.

The APIs were inspected to determine where the changes had occurred. We used the Git Diff tool to find differences between two versions of files that existed in both versions of the API. Once we had identified the changes, we inspected the documentation and the code itself to determine if there was a reason for the change, for example, if a given function had been labelled deprecated between versions. These changes were then categorised by new changes, updates or re-implementations, removals and general trends. The collected data were input into tables and spreadsheets, according to the API version.

%Reduce human error
The data collection from code and documentation was performed independently by both researchers, to reduce the risk of human errors affecting the results. If the data collected by each researcher differed, the cause of the discrepancy was investigated and resolved. 

%Interviews !!!improve later
After the initial source code inspection had been performed, interviews were conducted. The main purpose of these was to validate our findings during the code inspection with the designers of the APIs. Furthermore, the interviews were conducted to provide additional insight into decisions and motives behind changes that might have been overlooked during the code inspection. The final reason for interviewing the designers of the APIs was to provide further insight of the users of the API and how their decisions, needs and requirements have affected the development of the API.


\subsection{Data Analysis} \label{data_analysis}
%Intro and summary
The data analysis was conducted in two major phases \cite{andersson2007spiral}. During the first phase, a hypothesis generating approach \cite{seaman1999qualitative} was used to be able to fulfil the exploratory goal of the study. It was during this phase that the analysis of the API code and documentation was carried out. The second phase included analysis of the interviews, the goal of which was to confirm the hypotheses \cite{seaman1999qualitative} that were formulated in the first phase. Both phases were performed iteratively, together with the data collection. This created the opportunity to improve the process of analysis as the study progressed, as well as allowing the study to adapt to possible changes in direction, due to the hypothesis generating approach of the first phase \cite{andersson2007spiral}. The analysis of the code and documentation was performed using grounded theory analysis \cite{seaman1999qualitative}, as it is recommended for hypothesis generating studies \cite{runeson2009guidelines} \cite{seaman1999qualitative}.

%Description of code analysis
More specifically, the approach undertaken was divided into three steps where the data was first coded based on which category of maintenance \cite{chapin2001types} the motive of the change corresponded to. The data were then mapped and coded to the laws presented by \cite{lehman1980programs}. The codes were then analysed from a high-level point of view, the main goal of which was to identify trends in the codes. The final step involved analysis of these trends and it was during this stage the hypotheses were generated and formulated. The same approach taken to reduce risks of research bias and human error in the data collection was performed during results analysis. 

%Description of interview analysis
Following the analysis of the archival data, the results of the interviews were analysed. The interviews were analysed using the same approach taken for the archival data. The results of this analysis was then compared and correlated with the results of the code analysis, with the goal of confirming the hypotheses that had been formulated. This support also supported triangulation of our results. 

%Relate to RQs
The software evolution categories \cite{chapin2001types} and Lehman's laws \cite{lehman1980programs} were analysed to allow us to be able to answer \textbf{RQ1}. The software evolution categories were used to map and explore motives behind changes and Lehman's laws were used to see what drives the natural evolution of APIs. Our ability to correctly predict the motives compared to the actual motives of the designers which were made clear during the interviews, will serve as the basis for answering \textbf{RQ2}.

%This should probably go in Methodology... parts of it at least /W
In order to answer \textbf{RQ1}, we categorised the changes based on the 12 maintenance categories \cite{chapin2001types}, by inspecting the source code and the accompanying documentation. Following the interview, we compared our categorisations to the actual motive which was gathered from the interview. 

Each change between versions has been identified and grouped into four particular categories reflecting what kind of change they were; New, Modified, Removed and General Trends. 

Each section introduces the change and then discusses what the changes entailed, how we perceived them in relation to the twelve maintenance types, what our interviewee said about the changes and finally how the interviewees views of the changes relate to the maintenance categories. Each change was given a main category of maintenance and a subcategory if appropriate. This information will be used to answer \textbf{RQ1} and \textbf{RQ1.1}.
%This paragraph should be moved to Methodology


\subsection{Validity Threats} \label{validity_threats}
In this section we discuss possible threats to construct validity, internal validity, external validity and reliability \cite{runeson2009guidelines}.

%We must add construct validity. 

%Internal Validity
\textit{Internal validity} threats for our study have been greatly reduced by the methodologies we have employed. By performing an individual inspection of  the API source code, documentation and individual results analysis, internal validity is significantly reduced. Triangulation of the results with the use of interviewing the designers is a key step in reducing potential validity threats in our study.

%External Validity
Regarding \textit{external validity}, generalisability and the appropriateness of our results are at risk. In our study we have striven to ensure that our findings will be as useful as possible to others. Given that there are some similar studies to ours and that ours is an exploratory study, our results will be useful to others who perform similar studies in the future. Our results come from both APIs either in production or soon to be in production. As such, the results of this study will hopefully be of use to the company at which they were studied, be it now for their current API or in the future when they inevitably develop others. Likewise, other companies in similar positions could use the results of our study when creating their own APIs.

%Reliability
The largest \textit{reliability} threat facing our study was the reproducibility. To counter this threat, we have followed a well-proven method for analysing the collected data. Furthermore, as mentioned previously, we have attempted to limit bias and ambiguity in our interview questions where possible. To ensure clarity of the questions, we have field tested the interview with some of our peers, improving the questions based on their feedback.

%Another threat was we were reliant upon being given documentation and code. I.e. they might not give us everything, leave stuff out, ignore things etc.


\section{Results} \label{results}
This section will present the results of our study. The results related to \textbf{RQ1} and \textbf{RQ1.1} are introduced in Section \ref{results_rq1}, and the results of \textbf{RQ2} are presented in Section \ref{results_rq2}



\subsection{RQ1 Results} \label{results_rq1}
\noindent
RQ1: \textbf{How do companies actively drive API evolution?}

\noindent
RQ1.1: \textbf{To what extent can we reverse engineer API change decisions?}
\smallskip

Many changes were found between version 1.4 and version 2.0. Initial inspection revealed there to be many deprecations which were later re-implemented as new modules. We have considered these changes as a single change instead of a deprecation and a re-implementation. In total, thirteen unique changes were found. These changes are show in table \ref{table:Categories}.
%
The changes have been divided up into four specific categories, namely: new, modified, removed and general trends. The category new concerns additions of modules, modified concerns modifications to modules that existed in version 1.4 and removed are changes where functionality was removed being deprecated or replaced by functionality. General trends are broad changes that do not directly affect functionality. 
%%Add percentages for both main and sub and specify which is for which
After cross-examining our results with the interviewee and their responses, we found that 78\% of our main categorisation predictions matched the actual intent of the changes and that 78\% of our sub categorisations predictions matched the actual intents. 

\begin{table}
       \centering
       \begin{tabular}[ht]{|c"c|c|c|c|}

              \hline

              \multirow{2}{*}{\textbf{Change}}          & \multicolumn{2}{c}{\textbf{Main}}       & \multicolumn{2}{c}{\textbf{Sub}}        \\ \cline{2-5}

                                   & \textbf{P}                & \textbf{A}                & \textbf{P}                & \textbf{A}         \\ \hline    
              Example Code         & U                         & R\textsubscript{ef}       & R\textsubscript{ef}       & U                  \\ \hline
              Documentation        & U                         & U                         & R\textsubscript{ef}       & R\textsubscript{ef} \\ \hline
              Interfaces           & G                         & P                         & P                         & G                  \\ \hline
              Error Handling       & P                         & P                         & G                         & G                  \\ \hline
              3rd Party            & A                         & A                         & N/A                       & N/A                \\ \hline
              axaudio              & E                         & E                         & N/A                       & N/A                \\ \hline
              axptz                & E                         & E                         & N/A                       & N/A                \\ \hline
              axstorage            & E                         & E                         & N/A                       & N/A                \\ \hline
              axserialport         & E                         & E                         & N/A                       & N/A                \\ \hline
              axevent              & E                         & E                         & G                         & G                  \\ \hline
              axhttp               & E                         & E                         & G                         & G                  \\ \hline
              ax\_parameter        & E                         & E                         & G                         & G                  \\ \hline
              Burst Mode           & R\textsubscript{ed}       & R\textsubscript{ed} &     N/A                         & N/A                \\ \hline


       \end{tabular}
       \caption{Category }
       \label{table:Categories}
\end{table}



\subsubsection{axptz}
%Add info about this is one of the added changes XXX (do that for all)
The Pan, Tilt and Zoom (ptz) module concerns functionality related to manoeuvring the camera, both mechanically and digitally. 
%%Relate it to Categories
We concluded that this change was enhancive, because it is a new feature of the API. There was no secondary motive behind this change, as the change was purely enhancive. 
%%What she said
The interviewee described how this change, as well as the other changes classified as additions, were all included in the new API at the request of API users. Prior to the change being introduced, there was no API functionality for controlling the camera and as such, it was a high priority addition to the new API. 
%%Category based on her information
The interviewees' comments allowed us to concluded that we had correctly identified the change as being enhancive. Furthermore, we were also correct in our prediction that there was no secondary change category. 

\subsubsection{axaudio}
%%Describe the change 
The most important functionality of the camera is to capture and analyse video data, however, some API users require the ability to analyse audio data. The addition of axaudio allows API users to perform audio analysis upon audio streams captured by cameras. 
%%Relate it to Categories
This change was determined to be enhancive, as it was an addition of a new feature to the API. We found no secondary motive for the change. 
%%What she said
Audio analysis had previously not been supported in version 1.4 of the API. However, during the interview, it was revealed that an API user had managed to implement their own audio analysis application using version 1.4 of the API. Given the apparent demand for audio analysis, it was included in version 2.0 of the API.
%%Category based on her information
Taking into account the interviewee's reasoning, we concluded that we had successfully determined that the change was enhancive. The addition of axaudio had no secondary motive. 

\subsubsection{axstorage}

%%Describe the change 
Prior to the newest version of the API being released, the sole alternative for storing data was to use the Video Management System. Version 2.0 added the possibility of alternative storage solutions, by allowing to the camera to interface with external storage devices, such as SD cards. 
%Relate it to categories
Enhancive was chosen to be the primary category of change, given that axstorage was a new addition in version 2.0. No secondary motive was identified. 
%%What she said
The interviewee described how limited storage options for the cameras, in version 1.4, was the reason that increased functionality was strongly requested by API users. As such, axstorage was included in version 2.0 of the API.
%%Category based on her information
The information gathered from the interview therefore supported our original categorisation; it was an enhancive change. No secondary category was established. 

\subsubsection{axserialport}

%%Describe the change 
The addition of axserialport allows API users to connect various devices to their cameras through the use of a serial port. This allows users to integrate multiple devices to create their own unique solutions. This was not possible in version 1.4 of the API.
%%Relate it to Categories
The addition of this module was determined to be an enhancive change, as it involved the addition of a new feature. No relevant secondary category was identified.
%%What she said
The addition of axserialport was requested by API users to allow them to connect their cameras with other devices. A possible use case, that was given during the interview, involved a ticketing system which allows for joint analysis of data from multiple devices. As such it was included in version 2.0, to meet the demand of the API users.
%%Category based on her information
Given this information, we concluded that we were correct categorising this change as enhancive. The categorisation of the secondary category was also correct. 

\subsubsection{axevent}

%%Describe the change 
Version 2.0 of the API was designed to be an event-driven system that makes use of callbacks. To achieve this, the old event system had to be re-designed. The new design is used by all features of version 2.0 of the API. An example of when an event is generated, would be when movement is detected by the camera. 
%%Relate it to Categories
Given that this module was a re-implementation of the previous event system, we concluded that it should be categorised mainly as an enhancive change with the secondary change as groomative. Groomative was chosen as the secondary category due to the additional motive of bringing the new functionality into line with the new design.
%%What she said 
The interviewee outlined that the previous version of axevent, event, was deprecated in favour of a re-implemention of the new event system. One reason being, that the case company was dissatisfied with certain usability aspects of API version 1.4. The module was then completely re-implemented and re-designed according to the new system design of version 2.0.
%%Category based on her information
From the discussion in the interview, it was clear that both of our categorisations were correct. The change was primarily enhancive and secondarily groomative.

\subsubsection{axhttp}

%%Describe the change 
The module axhttp serves to provide a Common Gateway Interface which allows the camera to dynamically send data to web pages. The previous version of axhttp was re-implemented in version 2.0, to correspond with the new design standards and at the same time, additional functionality was added to the module.
%%Relate it to Categories
This change re-implemented an existing module while adhering to the new design of API version 2.0. The main categorisation therefore was chosen to be enhancive with groomative as the secondary change.
%%What she said 
The interviewee described that the main driving force behind this change was to re-implement and add new functionality to the axhttp module, while at the same time, following the new design.
%%Category based on her information
Our categorisation of enhancive and groomative was therefore correct for this change. The primary intent was to add functionality while also allowing the re-implementation to make use of the new API design. 

\subsubsection{ax\_parameter}

%%Describe the change 
The parameter setting module of the API allowed data and application settings to be saved so that they are not lost if the device is not running. This module was re-implemented as ax\_parameter with added functionality and conformance to the new design standards of API version 2.0.
%2
Given that this change re-implemented an existing module while also incorporating the new design standards, it has been categorised as being primarily enhancive with a secondary category of groomative.
%3
The interviewee clarified that this change was mainly concerned with re-implementing existing functionality, while simultaneously adopting the new standards of version 2.0. 
%4
Given the information from the interview, we concluded that this change was correctly categorised; the primary intent was enhancive and the secondary intent was groomative.


\subsubsection{Burst Mode}

%%Describe the change 
The burst mode feature of the API allowed users to buffer a series of images for greater analysis. This feature was deprecated during the transition between version 1.4 and 2.0 and was not re-implemented.
%%Relate it to Categories
This change presented itself as a clear example of a reductive category of maintenance, as it was simply removed and was not replaced. We therefore gave no secondary categorisation for this change.
%%What she said
The interviewee described, that in order to continue using this feature, it would have to be re-implemented. An impact assessment was undertaken to determine if the removal of the function would be costly. Ultimately it was deemed appropriate to remove and the function was take out of the API.
%%Category based on her information
We can therefore conclude that we correctly categorised this change as reductive and that there are indeed, no secondary categories to describe this change.


\subsubsection{Example Code}

%%Describe the change 
The case company included a selection of example programs to assist developers with creating applications. This trend continued in version 2.0, but there were some significant improvements. The number of example programs and the amount of comments accompanying the code increased, thus improving quality of the examples.
%%Relate it to Categories
We therefore concluded that this change was updative, as the example code was updated to the new API and the new techniques that it utilises. We further decided that this change also had a secondary category of reformative.
%%What she said
During the interview, it became clear that the improvement of the example code was an important change between the two versions. The interviewee described how the examples were used frequently by their customers, however, the old examples had many varied implementation techniques even for similar tasks. This ultimately meant that the old examples were not satisfactory and that new examples would have to be written, preferably conforming to the same standards. The new example code explicitly covered the new functionality, focusing on new features and showing how they can be combined to create applications.
%%Category based on her information
With this information, we concluded that our categorisation was incorrect. It became clear that this change was, in actual fact, primarily reformative. It was also clear that the subcategory should therefore have been updative. 

\subsubsection{Documentation}

%%Describe the change 
As the API code was updated in version 2.0, the API documentation was updated to correspond with the new code. While there were no substantial changes, we found that the documentation is no longer offered as a PDF but is instead only offered as HTML. 
%%Relate it to Categories
We categorised this change as being updative with a reformative secondary category for the reasons that the change only updated the documentation to reflect the recent changes in version 2.0.
%%What she said
This sentiment was shared by the interviewee. They agreed with our assessment, that the documentation was only changed to keep it up to date with the current workings of the API and how the new systems interact with each other.
%%Category based on her information
We can therefore say that our categorisations were correct, the change was updative and reformative.

%!!!Re-write this, don't say no information etc

\subsubsection{Interfaces}

%%Describe the change 
Version 1.4 of the API allowed direct access to the headers of each module available in the API. Version 2.0 changed this by including interfaces through which functionality is accessed. This design change has had an effect on the whole API, as it has changed the structure of modules, but not the functionality of them.
%%Relate it to Categories
We therefore concluded that this change would be best categorised as  groomative. The secondary category was categorised as preventive, as the change could be seen as an attempt to reduce future maintenance. 
%%What she said
The interview provided further insight into the reasoning behind this design change. Improvements to coding standards, the desire for an event driven system and difficulty in using the existing APIs were all contributors to the decision to use interfaces in versions 2.0 of the API. Furthermore, the re-design would hopefully avoid future maintenance, while also allowing the system to be easily extended. 
%%Category based on her information
Taking this information into account, we concluded that our categorisation was incorrect. The interview showed that the primary categorisation should have been preventive, given the strong emphasis on avoiding future maintenance and improving usability. We further concluded that the secondary change should have been groomative, to better reflect the intent of improving the APIs maintainability.


\subsubsection{Error Handling}

%%Describe the change 
A substantial change included in version 2.0 was the addition of header files, containing enums of error codes. While we were not aware of what error handling was utilised prior to this version, we assumed it had changed, given the inclusion of these new files.
%%Relate it to Categories
We therefore categorised this change as being primarily preventive, as error handling is preventive by nature. Groomative was decided as the secondary category of maintenance, as improvement of error handling could be regarded as an attempt to improve maintainability. 
%%What she said
%% Glib - https://developer.gnome.org/glib/
During the interview, it was made clear that the previous error handling was lacking in expressiveness and usability. Glib was added to version 2.0 and the error handling functionality that Glib provides was incorporated into the new API design.
%%Category based on her information
We therefore concluded that our categorisation for this change was correct. Indeed, the primary reason for the change was to improve the existing error handling while conforming to the new API standard. 

\subsubsection{3\textsuperscript{rd} Party}
ATTN: (!!!We are waiting for more information from Johanna to confirm / add to this section!!!)

%%Describe the change 
2.0 utilizes more 3rd party libraries
axsound, for example, uses alsa
All modules use glib

The advent of the new API saw the inclusion of new 3\textsuperscript{rd} party libraries. For example, axsound utilises a library called Alsa, all interfaces use Glib and daemons have been provided for using D-Bus. These changes potentially make the library much more flexible both for the API designers in terms of features they can provide and for the application developers in terms of applications they can develop.

We therefore gave this change the main categorisation of adaptive with no suitable sub-categories being found.


The architects creating the API decided they wished to use Glib which came about primarily from internal discussions at the company.
%%Relate it to Categories

Architects decided to use glib, part of an internal decision. 
Glib (!!!ref to website) was therefore introduced to the new API to help alleviate this 

The new API utilises Glib in the majority of its interfaces and considering the fact that Glib has its own type of error handling, it seemed sensible to implement the same technique into the new API. However, it was expressed to us that the error handling would have changed between versions regardless of whether or not Glib was included. (!!!This is also too assume-y)


\subsection{RQ2 Results} \label{results_rq2}
\noindent
RQ2: \textbf{How do APIs ``passively'' evolve?}
\smallskip

The results related to \textbf{RQ2} are structured around each of Lehman's laws of software evolution \cite{lehman1980programs} and to what extent our findings show that the laws apply to platform APIs. A summary of our findings can be seen in Table \ref{table:lehman}. 


\begin{table}
       \centering
       \begin{tabular}[ht]{|l|c|}
              \hline

              \textbf{Law}                              & \textbf{Applicability}    \\ \hline
              Continuing Change                         & True                      \\ \hline
              Increasing Complexity                     & Kinda                     \\ \hline
              Self Regulation                           & True                      \\ \hline
              Conservation of Organisational Stability  & False                     \\ \hline
              Conservation of Familiarity               & True                      \\ \hline
              Continuing Growth                         & True                      \\ \hline
              Declining Quality                         & Kinda                     \\ \hline
              Feedback System                           & True                      \\ \hline

       \end{tabular}
       \caption{The applicability of Lehman's laws}
       \label{table:lehman}
\end{table}



\subsubsection{Continuing Change} %Reviewed by WJ
The case company described that including new functional content was one of the top priorities for the release of vesrion 2.0. This is supported by the characteristic of the changes identified in this study. 4 of the 13 changes were additions of new modules, and additional functionality was also added to re-implemented modules. It was also mentioned that the API users had previously requested more frequent updates to the API, despite the drawbacks this could cause. One of the main reasons for continuously adapting the API is also to control the way API users use the API. Prior to version 2.0 being released, a number of API users used workarounds to implement applications which contained functionality which was not yet offered from the API. These applications were fully functional, but there existed no standard method of implementation. We therefore conclude that the law of continuing change holds for APIs. 

\subsubsection{Increasing Complexity} \label{sec:law2} %Reviewed by WJ
A majority of the changes introduced in version 2.0 aimed to improve the structure and the way that the API was used. Many of these changes were related to the same design choices, which enforced a certain implementation style on the whole API. One example of this is the change to the interfaces which set a standard for the whole API. During the interview it was also concluded that consistency and following certain standards is an important factor to consider when designing APIs. It was also made clear that a contributing factor for changing certain parts of the API was to bring it into line with the new interface design. The interviewee mentioned that one way of achieving this was to follow guidelines or design best practices, but that the company currently did not make use of these. Even though the importance of maintaining the API in order to reduce complexity was stated, arguments which support that it is of lesser importance than releasing functional content was also presented. One example of where this is evident in the evolution of the API, is in the module that handles the video capturing and video stream. It was decided that this module would not be re-designed to conform with the new interface standard, as the changes to functionality in this module were very minor. Thus, the law of increasing complexity holds for APIs, but there is evidence that suggests that decreasing the complexity is not of the highest priority. 

\subsubsection{Self Regulation} \label{sec:law3} %Reviewed by WJ
The release of version 1.4 did not include any changes related to the API interface. Version 1.0 through to 1.4 strictly added support for additional build target platforms. When comparing the changes introduced in version 2.0 to the ones in previous versions, it is clear that the growth of the API has gradually increased. During the interview it was also mentioned that the future plans for the API did not include any major changes and that only a few minor changes were planned in the near future. The future updates to the API will also be made incrementally and there will not be a big bang update similar to that of version 2.0. This supports that the law of self regulation applies to APIs, assuming that version 2.0 can be considered to be the peak of the normal distribution curve of the APIs growth. 

\subsubsection{Conservation of Organisational Stability} %Reviewed by WJ
The changes to the API have been made very sporadically, where only two new versions have been released since the deployment of version 1.0. As mentioned in Section \ref{sec:law3}, the changes introduced in version 1.4 did not involve any changes to the existing API functions. Consequently, the only significant update to the API was made in the transition to version 2.0. The internal development of the API has also been made sporadically and there have been periods where the API has not been actively developed. This suggests that the law of conservation of organisational stability does not apply to APIs. 

\subsubsection{Conservation of Familiarity} %Reviewed by WJ
The documentation that is included with the API was rigorously updated with the introduction of version 2.0. All functionality which was added or modified in version 2.0 was updated accordingly in the documentation. The same pattern can be seen for the example code, which went through major changes as a result of the changes to the API code. The case company's intent to control the way that their API is used also suggests that the knowledge of how to use the API is of importance, since if the API is used in too many different ways, it will be more difficult for the case company to have relevant documentation and example code. It was also expressed during the interview that further transparency in how the API should be used could be achieved. One example mentioned of how this could be achieved is by improving the expressiveness regarding which API functions are supported on which hardware types. These facts support that the law of conservation of familiarity is true for APIs. 

\subsubsection{Continuing Growth} %Reviewed by WJ
Large parts of the changes between the versions were strictly additions of new functional content. 4 new modules were added and significant additions of new functionality were added to the modules which were re-designed from version 1.4. The interviewee also made it clear that increasing the functionality was one of the main goals with the 2.0 update. This also ties in with the ambition of controlling the way that the API is used, as mentioned previously. It was also mentioned that the case company had received feedback from the API users that more frequent updates to the functional content was desirable, even though this may require them to update their application code. We therefore conclude that the law of continuing growth applies to APIs. 

\subsubsection{Declining Quality} %Reviewed by WJ
The interviews established that a groomative motive was not the primary reason for implementing any change. The changes to the example code and the documentation, as well as the re-designed modules are examples of these, where the main motive behind the change was to either prevent unwanted usage or to increase the functional content. These changes did, however, also increase the quality and were a substantial part of the update. A counterargument to this reasoning can be seen in the module which handles the video data and capturing, which was not changed between the versions, as mentioned in Section \ref{sec:law2}. We therefore settle that the law of declining quality can be applied to APIs, but that there is data that implies that reducing quality is not of high importance. 

\subsubsection{Feedback System} %Reviewed by WJ
One of the future goals of improvement of the case company is to better include the API users and end-users of the applications in their feedback loop. Currently, only the API users are included in this feedback loop and the API architect expressed the desire to also include the end-users. The reasoning for this was to increase the quality, and to be able to deliver content which is useful for the users and which leads to good applications being developed. Prior to version 2.0 being released, an example of how the API users were included in the feedback loop was when they implemented functionality related to sound, despite the fact there was no interface for this.  The experiences of this API user, were later considered when developing the axsound module. One benefit of having a more structured feedback loop, would be that the API developers would have greater awareness of potential errors in the implementation of the API. Another ambition which was mentioned, was to bring scientific theories and best practices from academia into consideration when developing the API. This would aim to complement the current strategy which is largely based around the expertise and experiences of the API architects. Based on these factors and clearly expressed ambitions, we conclude that the law of feedback system is true for APIs. 




\section{Discussion} %Reviewed by W
Our results have been provided valuable insight to the motives behind the evolution of an API. The results show that APIs definitely can be studied from the point of view of long-established software evolution theories. Based on the result, we have formulated the subsequent outcomes. 



\subsection{Discussion RQ1}

\noindent
\textbf{Adding functionality is a prime driver of API evolution  } %Reviewed by W
Overwhelmingly, the primary driving factor behind API evolution was the desire for new API functionality. We found that a vast majority of the changes either added functionality or were direct effects of functionality being added. The main driver for these changes was the pressure from the API users, but pressure from the case company developers which utilised the API also contributed. This focus upon functionality was also emphasised in part due to a business goal ( "in part due to, sounds weird to me") . The more features the API can provide, the more applications developers can create for the cameras. This has a domino effect of increasing the appeal and therefore value of the products.

%API users should be included in the design process? 
\smallskip \noindent 
\textbf{Maintainability does not drive change  } %Reviewed by W 
While maintainability is important, it is not a primary driving factor for change. We found that where maintainability changed, functionality was also altered. For example, we predicted that the main intents to be enhancive which was correct. ( " Need to explain what was enhancive") Furthermore, of the changes identified, none were considered to be primarily groomative. Groomative motives were only found to be secondary, and never drove the change. Changes to the example code is further evidence of this. The example code was updated purely to reflect the changes in functionality and not as a groomative effort. 

\smallskip \noindent
\textbf{Aiding development of applications  } %Reviewed by W
Aiding ( "minor detail: is supporting better here?") users of the API to create correct and robust applications is a very important evolution factor for the case company. Changes between the versions brought about ( 're-word'?) improvements to error handling, the example code and the way in which the API utilises interfaces. This, coupled with removal of unwanted functionality and unsafe operations, has allowed the API to grow and become much more user-friendly. As mentioned previously, this could increase the amount of applications being created for the camera and in turn could increase its value ( "change to' : increase the value of them ?").

\smallskip \noindent
\textbf{Removing functionality  } %Reviewed by W
Previous literature has stated that deprecations should be favoured over removals from API for many reasons, except in specific circumstances. The successful removal of the burst function seems to indicate that this advice is well worth following ( "well worth following reads weirdly") ( 'this sentence also contradicts the previous one'). Indeed, Axis only removed this function from the API after an internal review found that the cost of removing it would outweigh potential drawbacks to ( 'of???') keeping it in the API. ( 'this sentence is weird', "and remove the indeed") It is ( 'change to We therefore recommend') therefore recommended to only remove something if the effects of removing it have been well investigated and that the removal is rather small in scale. ( "instead of saying  small in scale i think we should explain that they should be made in increments and only a few at once") 

\smallskip \noindent
\textbf{Updative changes do not drive change  } %Reviewed by W
Changes to documentation and example code are important, especially if the API is drastically changing between versions. However, these updative changes are drivers themselves, rather, they make up part of a larger change as a whole. ( "this whole section has to be re-written. We can't refer to them as updative changes since the nature of updative changes are reactive. instead refer to them as changes to !code e.g. documentation, example code etc.")
%^Probably needs more to it?

\smallskip \noindent
\textbf{Hardware was not a driving factor  } %Reviewed by W
Interestingly ( "remove interestingly") , we found that hardware ( "have to explain in what regard we 'expected' hardware to be a driver e.g. updates to hardware, the release of new cameras")) was not a direct driver of change. Initially, we had thought ( "rephrase had thought... anticipated? thought sounds like we guessed" (or maybe say "Our initial expectaitions were")) that it would be one of the strongest drivers of change ( "new sentence here"), for example, new versions of hardware become available or new hardware is added to the camera requiring something in the API to access it. This does seem to suggest that the hardware for the camera is sufficiently stable such that it does not require changes and that those changes do not need to be ( "change 'not need to be' to 'are not'?") reflected in new API versions.


\subsection{Discussion RQ1.1}



\noindent
\textbf{Functionality is reverse engineerable  } %Reviewed by W
All changes which main motive were to either add or remove functionality were accurately predicted. These changes were the most major ones, and it was expressed during the interview that these types of changes main driving factor behind the development of the new version. In summary, 11 out of a total 13 changes were correctly predicted. It is also interesting to note that all changes which were not assigned any sub-category were correctly predicted. This supports that such changes have a clearer intent and are perhaps more well-defined. 

\smallskip \noindent
\textbf{``Structural'' reverse engineerable to a lesser extent} %Reviewed by W
3 out of 5 changes which did not add functionality, but rather were introduced to redcue complexity and increase quality were correctly predicted. The two changes which were incorrectly predicted were wrong because the main motivation was mixed up with the secondary intent ( "re-phrase"). This shows that although the prediction was incorrect, the general reasoning was correct. Our predictions were accurate enough to allow us to form a reliable conlusion which created a good means for discussion with the company ( "re-phrase"). 





\subsection{Discussion RQ2}

\noindent
\textbf{A majority of the laws apply  }
Sufficient evidence was found for the laws of Continuing Change, Self Regulation, Conservation of Familiarity, Continuing Growth and Feedback System to establish that they apply to APIs. The most major explanation for this that a large part of the introduced changes were related to functionality. It is especially interesting to note that the laws of Self Regulation and Conservation of Familiarity perfectly match the API explored in this paper. 

\smallskip \noindent
\textbf{Two laws kinda apply  }
The laws of Increasing Complexity and Declining Quality were found to apply to APIs, but that the extent to which they apply might not be as significant for APIs compared to other types of systems. The reason that this doubt exists is that these motivations were only secondary to the motivations of increased functionality. An alternative explanation for these laws being of lesser significance in APIs could be that the general inertia to modify APIs which exists \cite{google_talk} \cite{mcdonnell2013empirical} \cite{robbes2012developers} \cite{henning2007api} might overshadow (!!!wording) the need to increase simplicity and quality. 


\smallskip \noindent
\textbf{One law does not apply  }
Strong evidence was found which suggests that the law of Conservation of Organisational Stability does not apply to APIs. Our results not only show that the law is not true for APIs, but that the opposite of what the law states is true for APIs. This is supported by the consensus in literature of the negative effects caused by modifications to APIs \cite{google_talk} \cite{mcdonnell2013empirical} \cite{robbes2012developers} \cite{henning2007api}. The results from our study also showed that the reluctancy to change APIs causes the releases of new versions to be few and sporadic. 


\smallskip \noindent
\textbf{The importance of a Feedback System  }
Especially interesting results were found in regards to the law of Feedback System. The importance of having a structured and developed feedback loop was stressed during the interview, and it was also expressed as one of the main points of improvement. This suggests that including feedback from more sources and making use of this feedback should be done more when developing an API. 






\section{Conclusion} \label{conclusion}
ATTN: This section has not been started. 

Summarise the findings of the discussion
Summarise what the next steps could be.

Look up the papers from the conference (especially regarding the discussion/conclusion)
discussion = revisiting research questions (and maybe structuring around industry/academia)
conclusion = summary part, main final points and future work 

Stuff for the conclusion:
Have a more structured feedback loop (include users) this can be future work too
Include more scientific theories



For future studies, this technique could be improved by performing more actions along side the code review. For example, having access to and analysing commit logs, design meetings and other such documentation would allow a much more thorough determination of intents to be collected and analysed. %%Conclusion stuff /Willy


%%The following should probably be in conclusion, right? /Willy
       What this means for industry:
              Greater emphasis should be placed upon communicating with the end users / application developers. APIs should be made with maintainability and extendibility in mind as they seem to be what changes the most between versions. They should probably improve their feedback system to get more feedback from the API users.

              Obvious benefit for Axis is that the more features == more applications == higher value for their camera. If they have many applications being developed by partners (In part due to the fact they have added more features to the camera API) then the value of their hardware and software will increase. This is probably the case for many other APIs but would need to be studied in some detail to determine the truth behind the statement.

       What this means for academia:
              Academia could benefit from the results as a means for further research - We have found that it's possible to reverse engineer these design decisions from a simple study, so perhaps more advanced studies should be conduct at a larger scale? -- Why though?


%%John add conclusion ideas here
We were correct with the majority of our categorisations. The ones we did get wrong were because we did not think of it from specific points of view. This probably means that it's possible to reverse engineer to some extent, but not completely (Which is probably the answer most people would expect).

Considering the Ecosystem and considering it as a whole when designing the API. She does not think that they did take it into consideration at all. They had not thought about them when designing the APIs. She does think about who is going to use it and how but nothing in regards to how it affects an ecosystem as a whole. Things like allowing embedded webpages for the ACAP allows users to get more information from their system meaning they don’t need to ask for as much help and assistance. They usually integrate this with the VMS. Overall there was not much thought about ecosystem when the API was designed. She’s unsure if it’s one ecosystem or two. The network APIs and their API. Perhaps it is one ecosystem. (this is something Imed is looking at).
It seems that a focus on ecosystems might be starting to come through but that they already thought about them without calling them ecosystems. For example, her mentioning that they already did think about the users of the API and how they would be using it gives a slight clue that they do already think about the wider audience of their API.

%See if our numbers match up with previous studies who said roughly 70\% of changes to an API were refactorings. That number is a little high in our case, but it's close! <---- This could be done in conclusion when we discuss how it contribues to academia (i.e. say it enforces previous studies blabla)


%%William add conclusion ideas here
It's interesting that the partners have mentioned that they want more frequent updates... maybe API developers should be less afraid of updating them? 
That the part about controlling how the API users use the API was such an important thing is interesting. (Not something we expected). 
-Relate to 80% refactorings paper and say that we found different results
*This is an intersting note if we want to compare platform apis and library apis to say that functionality changes more often in platform apis for example



%Business rules and motives are not taken into consideration apparently when creating these APIs. They probably should be!

\section{Acknowledgments}
We would like to thank Axis and that project at GU. 

\bibliographystyle{abbrv}
\bibliography{bib} 






\end{document}
