%
%  $Description: Author guidelines and sample document in LaTeX 2.09$ 
%
%  $Author: John Burchell & William Granli $
%  $Date: 2015/01/21 15:20:59 $
%  $Revision: 1.0
%

\documentclass[10pt,twocolumn]{article} 
\usepackage{latex8}
\usepackage{authblk}

\title{Exploring and Reverse Engineering the Motives Behind API Modifications}



\begin{document}


\author{John Burchell \qquad William Granli \\
		john.a.burchell@gmail.com \qquad william.granli@gmail.com \\
		Computer Science and Engineering  \\
		University of Gothenburg }


\maketitle





\section{Introduction}
%API Design (and a little bit of ecosystems, and a bit of problem statement)
As the software industry and the open source movement steadily grow, the number of public APIs is increasing. APIs can improve the development speed \cite{stylos2006comparing}, contribute to higher quality software \cite{stylos2006comparing} and increase the reusability of software \cite{afonso2012evaluating}. There is a consensus in that modifications to APIs could negatively impact the users of the API \cite{google_talk} \cite{mcdonnell2013empirical} \cite{robbes2012developers} \cite{henning2007api}. The main reason is that it will require the users to update the code, which is using the API, thus causing a disruption in the application's software ecosystem \cite{messerschmitt2005software}. The most common changes to APIs occur from refactoring \cite{dig2005role} \cite{xing2006refactoring}. 
%Software Evolution 
In the discipline of software evolution, such updates to software are studied from an evolutionary standpoint. Software can be updated for different reasons and these motives can be grouped into corrective, adaptive, perfective and preventive changes \cite{lientz1980software}. 

%Gap in Literature
Studies that explore the intent behind API modifications exist \cite{hou2011exploring}. There are, however, no studies that attempt to map the motives behind changes to existing software evolution theories, such as the four categories of maintenance \cite{lientz1980software}. The area of programming language APIs is well-explored \cite{hou2011exploring} \cite{shi2011empirical}, but few studies that explore platform APIs exist \cite{robbes2012developers}. To the best of our knowledge, no studies that explore the motives behind or the effects of API evolution have previously been performed on embedded platform APIs. 

%Purpose (and a bit of problem statement)
Due to the negative implications that modifications to APIs cause for its users, it is important to understand why changes to them occur. If most common pitfalls are known before the development of new APIs begin, these mistakes could be mitigated. Before the industry can make use of this information, we must also critically assess to what degree we can trace such motives. To achieve this, we will perform a case study which aims to investigate the underlying factors behind API changes. This will be achieved by empirically analysing the changes between two versions of an API. Subsequently, the architects of the API will be interviewed and asked to verify the accuracy of our findings. 

%Didn't change:
%* 'the motive behind...' behind what? I get the grammar, but drop 'behind', methinks

%%Integrate this with Introduction:
%Furthermore, a study on the impact of reliable APIs was undertaken in the Android ecosystem \cite{linares2013api}. The study aimed to discover if APIs with high rates of faults affected the success of an application. The study found that the 50 least popular applications had APIs which were 500\% more error prone, ultimately concluding that there is indeed a correlation between API stability and application success \cite{linares2013api}. 

\subsection{Research Questions}
\begin{itemize}
\item RQ1: What drives API evolution? 
\item RQ2: To what extent can we reverse engineer API change decisions?
\end{itemize}

%Structure of the paper
The sections following the Introduction are structured as follows: In Section 2, we present a literature review on research related to our study. Section 3 describes the case company and how it was selected. A description of our methodology is introduced in Section 4. 

\section{Existing Literature}


\subsection{API Design}
%%Wait a bit with adding a general introduction (explaining what an API is, what an API architect is etc.). Wait until we've read conference papers to see how they do it.
API design is notoriously difficult, as a myriad of design and performance decisions must be taken into consideration when creating APIs \cite{bloch2008effective} \cite{afonso2012evaluating} \cite{stylos2006comparing}. In previous research, generalisable usability studies have been created, with the aim of analysing the design decisions taken when creating an API \cite{stylos2006comparing}. Another empirical study, which involved working with 25 programmers, highlighted API design problems such as assigning names to API features and difficulty in naming types \cite{shi2011empirical}. The study also introduced four factors which are important to consider when creating an API: a) The API  must be understandable through good documentation, b) the API must not be overly abstract, c) the API must be reusable and d) the API must be easy to learn \cite{shi2011empirical}. Both studies also highlighted that the intent of the API must be clear to the user when using design patters, such as the concrete factory pattern \cite{shi2011empirical} \cite{stylos2006comparing}. These factors that have to be considered when designing APIs can also be viewed from a usability. One study proposes a framework consisting of twelve cognitive cognitive dimensions that have an impact on the interaction between the user and the API \cite{clarke2004measuring}. 


\subsection{Software Evolution}
Software evolution can be described as being the application of software maintenance activities and processes, resulting in a new, evolved version of the software.

The concept of software maintenance has existed since the 1960s. Well known studies from this era established the importance of software maintenance \cite{canning1972maintenance} \cite{lientz1980software}. One study would go on to have a particularly profound effect on software maintenance by establishing a set of four categories which describe the intents behind change to software \cite{lientz1980software}. These categories were refined in a further study, which saw the count of categories increase from four to twelve \cite{chapin2001types}; enhancive, corrective, reductive, adaptive, performance, preventive, groomative, updative, reformative, evaluative, consultive and training.

Each category describes an intent behind changes to software, focusing around one of 3 particular areas; the code, the software and the customer-experienced functionality \cite{chapin2001types}. This study also helped to further the distinction between software maintenance and software evolution. The study suggested that software maintenance is a part of software evolution and that the two are not interchangeable \cite{chapin2001types}. 

An early study made in the area of software evolution suggests that changes to software must obey one of eight laws of software evolution \cite{lehman1980programs}. The laws presented in the study are 1) Continuing Change, 2) Increasing Complexity, 3) Self Regulation, 4) Conservation of Organisational Stability, 5) Conversation of Familiarities, 6)Continuing Growth, 7) Declining Quality and 8) Feedback System \cite{lehman1980programs}. The study also outlines that these laws only apply to E-programs, which are programs that are ``change prone" and that ``mechanise a human or societal activity". 

\subsection{Related Work}
Previous studies that have attempted analyse APIs in the context of software evolution have primarily focused on APIs that are a part of large programming languages, such as Java \cite{shi2011empirical} \cite{hou2011exploring} and Smalltalk \cite{robbes2012developers}. One study \cite{hou2011exploring} attempted to uncover the intents behind the changes made in the AWT and Swing Java libraries. They found that the use of a strong architecture was vital in ensuring a successful evolution of the API \cite{hou2011exploring}. In their study, the intents were categorised around programming related factors such as reducing coupling or conformance to naming conventions.

One study \cite{dig2005role} investigated three frameworks and one library in which the study found that 80\% of refactoring changes to APIs negatively affected existing applications. Refactorings are not the only changes to APIs that can impact existing projects negatively. Another study was conducted regarding the changes, which the researchers refer to as ripple effects \cite{robbes2012developers}. They found that changes in APIs have an effect upon the entire ecosystem. This particular empirical study found that 14\% of non-trivial API deprecations caused errors in at least one project, with the worst case of 79 projects being affected \cite{robbes2012developers}.



\section{Case Company Description}
The case company is a medium-sized company in the domain of security cameras. The company has its headquarters in Lund, Sweden, but it operates worldwide. The company is the global market leader in the markets of network cameras and video encoders. The company develops embedded software for the security cameras, and some of their products are designed to be accessible through APIs that are also developed by the company. 

%Try to get information about the users of the API. Either through Imed, or through the interviews. 

The case was selected using convenience sampling \cite{flyvbjerg2006five}, and a maximum variation strategy was used \cite{benbasat1987case}. As such, the goal was to include as many companies as possible in this study.

%Try to motivate why other sampling methods weren't used.


\section{Methodology}
This study has been conducted using the case study methodology \cite{runeson2009guidelines}. The goal of the study was twofold. Firstly, the aim was to empirically \textit{explore} the motives behind changes to APIs, and secondly, our ambition was to \textit{validate} the results' level of correctness by comparing our findings with the case company's explanation of their motives. Our research can be classified as an embedded case study \cite{yin2013case}, since both the API code and API documentation have been used as units of analysis. 

The reason the selected methodology was used is that it is essential to study the phenomenon of API change in its natural context. The applicability of case studies in such scenarios is supported by existing studies \cite{runeson2009guidelines} \cite{benbasat1987case} \cite{yin2013case} \cite{robson2002real}. An alternative approach that was considered was design research, but if a prototype API was to be used instead of one which is tried and tested in an industry setting, the study would lack real-life context \cite{runeson2009guidelines}. An additional motivation for why the case study approach was used is that there is little existing research conducted in the area of motives behind API change, and that input from the industry is vital to the success of the research; especially to be able to answer RQ2. 

\subsection{Data Collection}
The data were collected primarily through inspections of the source code and the archival analysis of accompanying  documentation. The source code was comprised of two versions of the same API which the company had developed. An older version which is currently released and a newer version which is soon to be deployed. Each version of the API had its own respective documentation. The documentation was inspected and organised to find explanations of the features offered by the API.

From the APIs we collected method names, parameters and return types. (Note to Morgan: Additional data will collected. This is just an early ``estimation" for the proposal). The data were collected from both versions of the APIs, with the changes between the two versions being of particular interest. The collected data were input into tables and spreadsheets, according to the API version. From the archival documentation we collected data regarding the motive behind the functionality in API calls. Data gathered from the documentation was also stored in tables and spreadsheets and was organised together with its corresponding method.

The data collection was performed independently by both researchers, to reduce the risk of human errors affecting the results. If the data collected by each researcher differed, the cause of the discrepancy was investigated and resolved. 

These collection methods were the most appropriate given that the data were readily available from the company. This brought concerns that the data were not produced for the purpose of our research \cite{runeson2009guidelines}, meaning there was a risk of data being irrelevant or erroneous. 

Interviews were also conducted after the initial source code inspections had taken place. The main purpose of these was to validate our findings with the architects of the APIs. Furthermore, the interviews were conducted to provide additional insight into decisions and motives behind changes that might have been overlooked during the code inspection. The final reason for interviewing the architects of the APIs was to provide further insight of the users of the API. 



\subsection{Data Analysis}
The data analysis was conducted in two major phases \cite{andersson2007spiral}. During the first phase, a hypothesis generating approach \cite{seaman1999qualitative} was used to be able to fulfil the exploratory goal of the study. It was during this phase that the analysis of the API code and documentation was carried out. The second phase included analysis of the interviews, the goal of which was to confirm the hypotheses \cite{seaman1999qualitative} that were formulated in the first phase.  

Both phases were performed iteratively, together with the data collection. The reason for this created the opportunity to improve the process of analysis as the study progressed, as well as to be able to adapt to possible changes in direction, due to the hypothesis generating approach of the first phase \cite{andersson2007spiral}. 

The analysis of the code and documentation was performed using grounded theory analysis \cite{seaman1999qualitative}, as it is recommended for hypothesis generating studies \cite{runeson2009guidelines} \cite{seaman1999qualitative}.

More specifically, the approach undertaken was divided into three steps where the data was first coded based on which category of maintenance \cite{chapin2001types} the motive of the change corresponded to. The data were then mapped and coded to the laws presented by \cite{lehman1980programs}. The codes were then analysed from a high-level point of view, the main goal of which was to identify trends in the codes. The final step involved analysis of these trends, and it was during this stage the hypotheses were generated and formulated. 

Following the analysis of the archival data, the results of the interviews were analysed. The interviews were analysed using the same approach taken for the archival data. The results of this analysis was then compared and correlated with the results of the code analysis, with the goal of confirming the hypotheses that were formulated. This was done to triangulate our findings, to help reduce internal validity. 

The same approach taken to reduce risks of research bias and human error in the data collection was performed during results analysis. 


\subsection{Validity Threats}
% This section highlights how we have either diminished or overcome the most concerning validity threats facing our study.
This section has been structured around a well-known schema used for classifying validity threats \cite{runeson2009guidelines}.

%Internal Validity
\textit{Internal validity} threats for our study have been greatly reduced by the methodologies we have employed. By performing an individual inspection of  the API source code, documentation and individual results analysis, internal validity is significantly reduced. Triangulation of the results with the use of interviewing the architects is a key step in reducing potential validity threats in our study.

%External Validity
Regarding \textit{external validity}, generalisability and the appropriateness of our results are at risk. In our study we have striven to ensure that our findings will be as useful as possible to others. Given that there are some similar studies to ours and that ours is an exploratory study, our results will be useful to others who perform similar studies in the future. Our results come from both APIs either in production or soon to be in production. As such, the results of this study will hopefully be of use to the company at which they were studied, be it now for their current API or in the future when they inevitably develop others. Likewise, other companies in similar positions could use the results of our study when creating their own APIs.

%Reliability
The largest \textit{reliability} threat facing our study was the reproducibility. To counter this threat, we have followed a well-proven method for analysing the collected data. Furthermore, as mentioned previously, we have attempted to limit bias and ambiguity in our interview questions where possible. To ensure clarity of the questions, we have field tested the interview with some of our peers, improving the questions based on their feedback.


\bibliographystyle{latex8}
\bibliography{latex8}


\Section{Acknowledgement}
John had the main responsibility for sections 2, 4.1 and 4.3. William had the main responsibility for sections 1, 3, 4.0 and 4.3. We have, however, worked on all sections jointly and all sections have been reviewed by both of us. 


\end{document}

